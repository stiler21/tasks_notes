#!/bin/bash
pattern="^\d\d\d\d-\d\d-\d\d \d\d:\d\d:\d\d"
types=(LOG WRN ERR)

i=0
while read line; do
    fullpattern="$pattern ${types[$i]}"
    echo $line | grep -q -P "$fullpattern"
    if [[ $? != 0 ]]; then
        echo "error: $line"
        echo "expected: $fullpattern"
        exit -1
    fi
    echo $line
    i=$(expr $i + 1)
done < "${1:-/dev/stdin}"


if [ $i -lt 3 ]; then
  echo "Missing logs!"
  exit -1
fi